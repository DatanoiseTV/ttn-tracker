[Unit]
Description=gunicorn daemon for ttn-mapper
After=network.target

[Service]
User=root
Group=pi
WorkingDirectory=/home/pi/ttn-tracker
ExecStart=/home/pi/ttn-tracker/env/bin/gunicorn \
--workers 1 \
--worker-class gthread \
--threads 2 \
--timeout 300 \
--pid /var/lock/ttn_tracker_flask.pid \
--bind unix:/var/run/ttn_tracker_flask.sock app:app

ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=/bin/kill -s TERM $MAINPID

[Install]
WantedBy=multi-user.target
